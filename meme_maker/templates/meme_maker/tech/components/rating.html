{# 
Star Rating Component - Simplified version

Usage:
    {% include 'meme_maker/components/rating.html' with object=template type='template' user_rating=user_rating %}
    {% include 'meme_maker/components/rating.html' with object=meme type='meme' user_rating=user_rating %}
#}

{% if compact %}
{# Compact display for cards #}
<div class="meme-rating-compact">
    <span class="star">★</span>
    <span>{{ object.get_average_rating }}</span>
    {% if object.rating_count > 0 %}
    <span>({{ object.rating_count }})</span>
    {% endif %}
</div>

{% else %}
{# Full rating widget #}
{% with avg=object.get_average_rating %}
<div class="meme-rating" 
     data-rating-widget 
     data-type="{{ type }}" 
     data-pk="{{ object.pk }}"
     data-rate-url="{% if type == 'template' %}{% url 'meme_maker:rate_template' pk=object.pk %}{% else %}{% url 'meme_maker:rate_meme' pk=object.pk %}{% endif %}">
    
    {# Display current rating #}
    <div class="meme-rating-display" data-rating-display>
        <span class="star{% if avg < 1 %} empty{% endif %}">{% if avg >= 1 %}★{% else %}☆{% endif %}</span>
        <span class="star{% if avg < 2 %} empty{% endif %}">{% if avg >= 2 %}★{% else %}☆{% endif %}</span>
        <span class="star{% if avg < 3 %} empty{% endif %}">{% if avg >= 3 %}★{% else %}☆{% endif %}</span>
        <span class="star{% if avg < 4 %} empty{% endif %}">{% if avg >= 4 %}★{% else %}☆{% endif %}</span>
        <span class="star{% if avg < 5 %} empty{% endif %}">{% if avg >= 5 %}★{% else %}☆{% endif %}</span>
    </div>
    
    <span class="meme-rating-text" data-rating-text>
        {{ object.get_rating_display }}
    </span>
    
    {% if not readonly %}
    {# Interactive rating stars #}
    <div class="meme-rating-stars" data-rating-input style="margin-left: 1rem;">
        <input type="radio" name="rating-{{ type }}-{{ object.pk }}" id="star5-{{ type }}-{{ object.pk }}" value="5" {% if user_rating == 5 %}checked{% endif %}>
        <label for="star5-{{ type }}-{{ object.pk }}" data-value="5" title="Rate 5 stars">★</label>
        
        <input type="radio" name="rating-{{ type }}-{{ object.pk }}" id="star4-{{ type }}-{{ object.pk }}" value="4" {% if user_rating == 4 %}checked{% endif %}>
        <label for="star4-{{ type }}-{{ object.pk }}" data-value="4" title="Rate 4 stars">★</label>
        
        <input type="radio" name="rating-{{ type }}-{{ object.pk }}" id="star3-{{ type }}-{{ object.pk }}" value="3" {% if user_rating == 3 %}checked{% endif %}>
        <label for="star3-{{ type }}-{{ object.pk }}" data-value="3" title="Rate 3 stars">★</label>
        
        <input type="radio" name="rating-{{ type }}-{{ object.pk }}" id="star2-{{ type }}-{{ object.pk }}" value="2" {% if user_rating == 2 %}checked{% endif %}>
        <label for="star2-{{ type }}-{{ object.pk }}" data-value="2" title="Rate 2 stars">★</label>
        
        <input type="radio" name="rating-{{ type }}-{{ object.pk }}" id="star1-{{ type }}-{{ object.pk }}" value="1" {% if user_rating == 1 %}checked{% endif %}>
        <label for="star1-{{ type }}-{{ object.pk }}" data-value="1" title="Rate 1 star">★</label>
    </div>
    {% endif %}
</div>
{% endwith %}
{% endif %}
