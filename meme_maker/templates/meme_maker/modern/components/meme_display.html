{#
Embeddable Meme Display Component
=================================

This component can be included in any template to display a meme with text overlay.

Usage:
    {% include "meme_maker/components/meme_display.html" with meme=meme %}

Required context:
    - meme: A Meme model instance

Optional context:
    - show_info: Whether to show meme info below (default: False)
    - show_actions: Whether to show action buttons (default: False)
#}

<div class="meme-display">
    <div class="meme-display-wrapper">
        {% if meme.generated_image %}
        <img src="{{ meme.generated_image.url }}" alt="Meme #{{ meme.pk }}" class="meme-image">
        {% elif meme.get_source_image_url %}
        <img src="{{ meme.get_source_image_url }}" alt="Meme #{{ meme.pk }}" class="meme-image">
        {% for overlay in meme.get_overlay_for_css %}
        <div class="meme-text-overlay" style="{{ overlay.style }}{% if overlay.color %}color: {{ overlay.color }};{% endif %}{% if overlay.font_size %}font-size: {{ overlay.font_size }}px;{% endif %}">
            {{ overlay.text }}
        </div>
        {% endfor %}
        {% else %}
        <div class="meme-card-image" style="background: var(--meme-bg-light); display: flex; align-items: center; justify-content: center; color: var(--meme-text-light); min-height: 200px;">
            No image
        </div>
        {% endif %}
    </div>
</div>

{% if show_info %}
<div class="meme-info">
    <p class="meme-info-text">
        <strong>Created:</strong> {{ meme.created_at|date:"F d, Y g:i A" }}
    </p>
</div>
{% endif %}

{% if show_actions %}
<div style="margin-top: 1.5rem; display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
    <a href="{% url 'meme_maker:meme_download' meme.pk %}" class="meme-btn">
        Download Image
    </a>
    {% if meme.template %}
    <a href="{% url 'meme_maker:meme_editor' meme.template.pk %}" class="meme-btn meme-btn-secondary">
        Create Another →
    </a>
    {% else %}
    <a href="{% url 'meme_maker:template_list' %}" class="meme-btn meme-btn-secondary">
        Browse Templates →
    </a>
    {% endif %}
</div>
{% endif %}
